CREATE TABLE books (id INT UNSIGNED AUTO_INCREMENT NOT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, publisher VARCHAR(255) DEFAULT NULL, published_year INT UNSIGNED DEFAULT NULL, ord INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, FULLTEXT INDEX search (title), UNIQUE INDEX slug (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE text_pages (id INT UNSIGNED AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, short_title VARCHAR(255) DEFAULT NULL, body TEXT NOT NULL, read_count INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, UNIQUE INDEX slug (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE galleries (id INT UNSIGNED AUTO_INCREMENT NOT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, file_name VARCHAR(255) NOT NULL, caption VARCHAR(255) DEFAULT NULL, ord INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, UNIQUE INDEX filename (file_name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE books_contents (id INT UNSIGNED AUTO_INCREMENT NOT NULL, book_id INT UNSIGNED DEFAULT NULL, poem_id INT UNSIGNED DEFAULT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, ord INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, INDEX IDX_DDF5A10F16A2B381 (book_id), INDEX IDX_DDF5A10F8938791B (poem_id), UNIQUE INDEX UNIQ_DDF5A10F16A2B3818938791B (book_id, poem_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE contact_messages (id INT UNSIGNED AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, email VARCHAR(255) DEFAULT NULL, body TEXT NOT NULL, ip VARCHAR(45) DEFAULT NULL COMMENT 'length 45 to support IPv6', created_at DATETIME DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE comments (id INT UNSIGNED AUTO_INCREMENT NOT NULL, entity_class VARCHAR(255) NOT NULL, entity_id INT UNSIGNED DEFAULT 0 NOT NULL, username VARCHAR(255) NOT NULL, body TEXT NOT NULL, ip VARCHAR(45) DEFAULT NULL COMMENT 'length 45 to support IPv6', created_at DATETIME DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE essays (id INT UNSIGNED AUTO_INCREMENT NOT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, short_title VARCHAR(255) DEFAULT NULL COMMENT 'used in the navigation', body TEXT NOT NULL, read_count INT UNSIGNED DEFAULT 0 NOT NULL, ord INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, UNIQUE INDEX slug (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE videos (id INT UNSIGNED AUTO_INCREMENT NOT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, summary VARCHAR(255) DEFAULT NULL, views INT UNSIGNED NOT NULL, ord INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, UNIQUE INDEX slug (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE poems (id INT UNSIGNED AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, dedication VARCHAR(255) DEFAULT NULL, body TEXT DEFAULT NULL, read_count INT UNSIGNED DEFAULT 0 NOT NULL, use_monospace_font TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'monospace fonts benefit text alignment for certain poems', created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, FULLTEXT INDEX search (title, dedication, body), UNIQUE INDEX slug (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE configs (id INT UNSIGNED AUTO_INCREMENT NOT NULL, setting VARCHAR(255) NOT NULL, `value` VARCHAR(255) DEFAULT NULL, modified_at DATETIME DEFAULT NULL, UNIQUE INDEX setting (setting), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE press_articles (id INT UNSIGNED AUTO_INCREMENT NOT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, press VARCHAR(255) DEFAULT NULL, published_date DATE DEFAULT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, short_title VARCHAR(255) DEFAULT NULL COMMENT 'used in the navigation', body TEXT NOT NULL, read_count INT UNSIGNED DEFAULT 0 NOT NULL, ord INT UNSIGNED DEFAULT 0 NOT NULL, created_at DATETIME DEFAULT NULL, modified_at DATETIME DEFAULT NULL, UNIQUE INDEX slug (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
ALTER TABLE books_contents ADD CONSTRAINT FK_DDF5A10F16A2B381 FOREIGN KEY (book_id) REFERENCES books (id);
ALTER TABLE books_contents ADD CONSTRAINT FK_DDF5A10F8938791B FOREIGN KEY (poem_id) REFERENCES poems (id);
